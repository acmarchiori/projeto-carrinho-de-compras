(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&c(s)}).observe(document,{childList:!0,subtree:!0});function o(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerpolicy&&(n.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?n.credentials="include":t.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(t){if(t.ep)return;t.ep=!0;const n=o(t);fetch(t.href,n)}})();const f="CEP n\xE3o encontrado",C=async e=>{const r=fetch(`https://cep.awesomeapi.com.br/json/${e}`),o=fetch(`https://brasilapi.com.br/api/cep/v2/${e}`),t=await(await Promise.any([r,o])).json();if(t.code==="invalid"||t.code==="not_found")throw new Error(f);return t},w=async()=>{const e=document.querySelector(".cart__address");try{const r=document.querySelector(".cep-input"),o=await C(r.value);e.innerHTML=`${o.street||o.address} - ${o.neighborhood||o.district} - ${o.city} - ${o.state}`}catch{e.innerHTML=f}},p=async e=>{if(!e)throw new Error("ID n\xE3o informado");return await(await fetch(`https://api.mercadolibre.com/items/${e}`)).json()},v=async e=>{if(!e)throw new Error("Termo de busca n\xE3o informado");return(await(await fetch(`https://api.mercadolibre.com/sites/MLB/search?q=${e}`)).json()).results},g=()=>{const e=localStorage.getItem("cartProducts");return e?JSON.parse(e):[]},E=e=>{if(!e)throw new Error("Voc\xEA deve fornecer um ID");const o=[...g(),e];localStorage.setItem("cartProducts",JSON.stringify(o))},P=e=>{if(!e)throw new Error("Voc\xEA deve fornecer um ID");const r=[...g()],o=r.indexOf(e);r.splice(o,1),localStorage.setItem("cartProducts",JSON.stringify(r))},l=e=>{const r=document.createElement("img");return r.className="product__image",r.src=e.replace("I.jpg","O.jpg"),r},a=(e,r,o="")=>{const c=document.createElement(e);return c.className=r,c.innerText=o,c},u=()=>{let e=0;const r=JSON.parse(localStorage.getItem("cartProducts"))||[],o=document.querySelector(".total-price");r.length===0?o.innerHTML=0:r==null||r.forEach(async c=>{const t=await p(c);e+=t.price,o.innerHTML=e.toFixed(2)})},S=(e,r)=>{e.remove(),P(r),u()},_=({id:e,title:r,price:o,pictures:c})=>{const t=document.createElement("li");t.className="cart__product";const n=a("div","cart__product__image-container"),s=l(c[0].url);n.appendChild(s);const d=l((c[1]||c[0]).url);n.appendChild(d),t.appendChild(n);const i=a("div","cart__product__info-container");i.appendChild(a("span","product__title",r));const h=a("span","product__price","R$ ");h.appendChild(a("span","product__price__value",o)),i.appendChild(h),t.appendChild(i);const y=a("i","material-icons cart__product__remove","delete");return t.appendChild(y),t.addEventListener("click",()=>S(t,e)),t},I=({id:e,title:r,thumbnail:o,price:c})=>{const t=document.createElement("section");t.className="product",t.appendChild(a("span","product__id",e));const n=a("div","img__container");n.appendChild(l(o)),t.appendChild(n),t.appendChild(a("span","product__title",r));const s=a("span","product__price","R$ ");s.appendChild(a("span","product__price__value",c)),t.appendChild(s);const d=a("button","product__add","Adicionar ao carrinho!");return t.appendChild(d),t};document.querySelector(".cep-button").addEventListener("click",w);const m=document.querySelector(".products"),L=()=>{const e=document.createElement("p");e.className="loading",e.innerText="carregando...",m.appendChild(e)},b=()=>{const e=document.createElement("p");e.className="error",e.innerText="Algum erro ocorreu, recarregue a p\xE1gina e tente novamente",m.appendChild(e)},N=async()=>{try{L(),(await v("computador")).forEach(o=>{const c=I(o);m.appendChild(c)}),document.querySelector(".loading").remove()}catch{b()}},q=async()=>{await N();const e=document.querySelectorAll(".product__add"),r=document.querySelectorAll(".product__id"),o=document.querySelector(".cart__products");e.forEach((c,t)=>c.addEventListener("click",async()=>{const n=r[t].innerText;E(n);const s=await p(n),d=_(s);o.appendChild(d),u()}))};q();const A=()=>{const e=JSON.parse(localStorage.getItem("cartProducts"))||[];e==null||e.forEach(async r=>{const o=await p(r),c=_(o);document.querySelector(".cart__products").appendChild(c)})};window.onload=()=>{A(),u()};
